<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Utilisateurs</title>
</head>
<body style="margin: 0; padding: 0; font-family: sans-serif; background-color: #f4f4f4;">

<div style="display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 2em;">
    <div style="background-color: #9b6ef3; color: white; padding: 2em; border-radius: 15px; width: 100%; max-width: 800px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">

        <h2 style="text-align: center; margin-bottom: 1em;">Liste des utilisateurs ðŸ‘¥</h2>

        <table style="width: 100%; border-collapse: collapse; background-color: white; color: black; border-radius: 10px; overflow: hidden;">
            <thead style="background-color: #6c5ce7; color: white;">
                <tr>
                    <th style="padding: 0.75em;">Email</th>
                    <th style="padding: 0.75em;">RÃ´le(s)</th>
                    <th style="padding: 0.75em;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr style="text-align: center; border-bottom: 1px solid #ddd;">
                        <td style="padding: 0.75em;">{{ user.email }}</td>
                        <td style="padding: 0.75em;">{{ user.roles | join(', ') }}</td>
                        <td style="padding: 0.75em;">
                            {% if 'ROLE_ADMIN' not in user.roles %}
                                <form action="{{ path('admin_users_promote', {'id': user.id}) }}" method="post" style="display:inline;">
                                    <button type="submit" style="background-color: #55efc4; border: none; padding: 0.4em 0.8em; margin: 0 0.3em; border-radius: 8px; cursor: pointer;">Promouvoir admin</button>
                                </form>
                            {% endif %}

                            <form action="{{ path('admin_users_delete', {id: user.id}) }}" method="post" onsubmit="return confirm('Supprimer cet utilisateur ?');" style="display:inline;">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
                                <button type="submit" style="background-color: #ff7675; border: none; padding: 0.4em 0.8em; margin: 0 0.3em; border-radius: 8px; cursor: pointer;">Supprimer</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>

</body>
</html>
