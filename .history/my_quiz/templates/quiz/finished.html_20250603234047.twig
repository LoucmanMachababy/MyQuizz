{% extends 'base.html.twig' %}

{% block title %}Résultats du Quiz{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="mb-4">Résultats du quiz : {{ categorie.nom }}</h1>

        <div class="alert alert-info">
            Vous avez obtenu <strong>{{ score }}/{{ total }}</strong> bonnes réponses.
        </div>

        <hr>

        {% for entry in answers %}
            <div class="mb-4">
                <h5>Question {{ loop.index }} :</h5>
                <p><strong>{{ entry.question.intitule }}</strong></p>

                {% if entry.correcte %}
                    <p class="text-success">
                        ✅ Votre réponse : {{ entry.reponse.intitule }} (correcte)
                    </p>
                {% else %}
                    <p class="text-danger">
                        ❌ Votre réponse : {{ entry.reponse.intitule }} (incorrecte)
                    </p>

                    {% set bonne_reponse = entry.question.reponses|filter(r => r.estCorrecte)|first %}
                    {% if bonne_reponse %}
                        <p class="text-success">
                            ✔️ Bonne réponse : {{ bonne_reponse.intitule }}
                        </p>
                    {% endif %}
                {% endif %}
            </div>
            <hr>
        {% endfor %}

        <a href="{{ path('quiz_global') }}" class="btn btn-primary">Retour aux catégories</a>
    </div>
{% endblock %}
